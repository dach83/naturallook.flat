$(function(){function e(){var e=$(".thumbs");return-10+e.innerWidth()-e.find("ul").outerWidth(!0)}function t(){$(".thumbs");return 10}function i(i){var n=$(".thumbs");if(!(n.find("ul").outerWidth(!0)<n.innerWidth())){var a=e(),d=t();a>i?i=a:i>d&&(i=d),n.find("ul").stop(!0).animate({left:i},500)}}function n(e){if(!s){var t=$(".slider"),n=$(".thumbs"),a=t.find("li"),d=n.find("li"),l=t.find("li[data-slide-id="+e+"]");l.length||(l=a.first(),e=l.attr("data-slide-id")),l.hasClass("active")||(a.removeClass("active"),l.find(".curtain").removeAttr("style"),l.find(".handle").removeAttr("style"),l.addClass("active"));var r=a.index(l)+1+"/"+a.length;$(".slide-counter").text(r);var o=n.find("li[data-slide-id="+e+"]");if(o.length){d.removeClass("active"),o.addClass("active");var u=(n.outerWidth(!0)-1.1*o.outerWidth(!0))/2-o.position().left;i(u)}s=!0,setTimeout(function(){s=!1},100)}}function a(){var e=$(".slider li.active").attr("data-slide-id");n(e)}function d(e){e.preventDefault();var t=$(".slider li.active").prev();t.length||(t=$(".slider li").last()),n(t.attr("data-slide-id"))}function l(e){e.preventDefault();var t=$(".slider li.active").next();t.length||(t=$(".slider li").first()),n(t.attr("data-slide-id"))}function r(e,t){e.preventDefault(),0>t?l(e):t>0&&d(e)}var o=0;downMouseX=0,$(document).on("mouseup",function(){$(".handle").removeClass("drag-handle"),o=0,downMouseX=0}),$(document).on("mousedown",function(e){e.preventDefault()}),$(".handle").on("mousedown",function(e){e.preventDefault();var t=$(this);t.addClass("drag-handle"),o=t.position().left,downMouseX=e.pageX}),$(document).on("mousemove",function(e){var t=$(".drag-handle");if(t.length){var i=t.parent(".slide"),n=i.find(".curtain"),a=o+(e.pageX-downMouseX),d=100*a/i.width();0>d?d=0:d>100&&(d=100),t.css("left",d+"%"),n.css("width",d+"%")}});var s=!1;a(),$("#js-prev-slide").click(d),$("#js-next-slide").click(l),$(document).keydown(function(e){37==e.keyCode&&d(e),39==e.keyCode&&l(e)}),$(".slider").mousewheel(r);var u=0;$(".thumbs").mousewheel(function(n,a){n.preventDefault();var d=$(this);if(d.find("ul").outerWidth(!0)<d.innerWidth())return void r(n,a);var l=u;0>a?u-=100:a>0&&(u+=100);var o=e(),s=t();o>=u?u=o:u>=s&&(u=s),l!=u&&i(u)}),$(".thumbs li").click(function(e){e.preventDefault();var t=$(this).attr("data-slide-id");n(t)}),$(window).resize(function(){$(".thumbs ul").removeAttr("style"),a()}),$("#js-close-gallery").click(function(){1==history.length?window.location.href="portfolio.html":history.back()})});