$(function(){function e(){var e=$(".thumbs");return-10+e.innerWidth()-e.find("ul").outerWidth(!0)}function t(){$(".thumbs");return 10}function i(i){var n=$(".thumbs");if(!(n.find("ul").outerWidth(!0)<n.innerWidth())){var d=e(),a=t();d>i?i=d:i>a&&(i=a),n.find("ul").stop(!0).animate({left:i},500)}}function n(e){var t=$(".slider"),n=$(".thumbs"),d=t.find("li"),a=n.find("li"),l=t.find("li[data-slide-id="+e+"]");l.length||(l=d.first(),e=l.attr("data-slide-id")),l.hasClass("active")||(d.removeClass("active"),l.find(".curtain").removeAttr("style"),l.find(".handle").removeAttr("style"),l.addClass("active"));var s=d.index(l)+1+"/"+d.length;$(".slide-counter").text(s);var r=n.find("li[data-slide-id="+e+"]");if(r.length){a.removeClass("active"),r.addClass("active");var o=(n.outerWidth(!0)-1.1*r.outerWidth(!0))/2-r.position().left;i(o)}}function d(e){e.preventDefault();var t=$(".slider li.active").prev();t.length||(t=$(".slider li").last()),n(t.attr("data-slide-id"))}function a(e){e.preventDefault();var t=$(".slider li.active").next();t.length||(t=$(".slider li").first()),n(t.attr("data-slide-id"))}var l=0;downMouseX=0,$(document).on("mouseup",function(){$(".handle").removeClass("drag-handle"),l=0,downMouseX=0}),$(document).on("mousedown",function(e){e.preventDefault()}),$(".handle").on("mousedown",function(e){e.preventDefault();var t=$(this);t.addClass("drag-handle"),l=t.position().left,downMouseX=e.pageX}),$(document).on("mousemove",function(e){var t=$(".drag-handle");if(t.length){var i=t.parent(".slide"),n=i.find(".curtain"),d=l+(e.pageX-downMouseX),a=100*d/i.width();0>a?a=0:a>100&&(a=100),t.css("left",a+"%"),n.css("width",a+"%")}}),n("0"),$("#js-prev-slide").click(d),$("#js-next-slide").click(a),$(document).keydown(function(e){37==e.keyCode&&d(e),39==e.keyCode&&a(e)}),$(".slider").mousewheel(function(e,t){e.preventDefault(),0>t?a(e):t>0&&d(e)});var s=0;$(".thumbs").mousewheel(function(n,d){n.preventDefault(),0>d?s-=100:d>0&&(s+=100);var a=e(),l=t();a>s?s=a:s>l&&(s=l),i(s)}),$(".thumbs li").click(function(e){e.preventDefault();var t=$(this).attr("data-slide-id");n(t)}),$(window).resize(function(){$(".thumbs ul").removeAttr("style");var e=$(".slider li.active").attr("data-slide-id");n(e)})});